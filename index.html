<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <link rel='stylesheet' href='/style.css'>
    </head>

    <body>
        <h1>My Revision</h1>
        
        <div id="iscreen">
            <p> Number of Questions: 
                <input type="text" id="input_box" value="1"></input>
                <button onclick="GetQuestions()">Start</button>
            </p>
        </div>
        
        <div id="qscreen">
            <h2 id="i"></h2>
            
            <p id="question"></p>
            
            <p id="question">
                <button onclick="ChangeQuestion(1)">Forward</button>
                <button onclick="ChangeQuestion(-1)">Backwards</button>
            </p>
            
            <p id="answer">
                <input type="text" id="answer_box">
            </p>
        </div>
            
        <script>
            document.getElementById("qscreen").style = "none";
        </script>
        
        <script>
            var currentQuestion = 1;
            var questions = [""];
            var answers = [""];
            var numberofquestions = "1";
            const getQuestionAPI = "https://qg7wae0zml.execute-api.eu-west-1.amazonaws.com/live?numberofquestions=";
            
            function ChangeQuestion(changeby) {
                answers[currentQuestion-1] = document.getElementById("answer");
                currentQuestion = currentQuestion + changeby; 
                
                if (currentQuestion <= questions.length && currentQuestion >= 1)
                {
                    document.getElementById("answer").innerHTML = answers[currentQuestion-1];
                    document.getElementById("question").innerHTML = questions[currentQuestion-1];
                    document.getElementById("i").innerHTML = "Question " + currentQuestion + "/" + questions.length;
                    console.log(answers)
                }
                else
                {
                    currentQuestion = currentQuestion - changeby;
                    console.log(answers)
                }
            }

            function GetQuestions() {
                InitialiseQuestionScreen();
                
                numberofquestions = document.getElementById("input_box").value;
                var api = getQuestionAPI + numberofquestions;
                console.log(api);
                
                $.getJSON(api, function(data) {
                    for(var i = 0; i < data.questions.length; i++){
                        questions[i] = data.questions[i].Item;
                        answers.push("");
                    }
                    
                    console.log(questions);
                    console.log(answers);
            
                    document.getElementById("test").innerHTML = questions[currentQuestion-1];
                    document.getElementById("i").innerHTML = "Question " + currentQuestion + "/" + questions.length;
                });
            }
            
            function InitialiseQuestionScreen(){
                document.getElementById("qscreen").style.display = "block";
                document.getElementById("iscreen").style.display = "none";
            }
        </script>
    </body>
</html>