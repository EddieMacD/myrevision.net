<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <link rel='stylesheet' href='/style.css'>
    </head>

    <body>
        <h1>My Revision</h1>
        
        <p id="input"> Number of Questions: 
            <input type="text" id="input_box">
            <input type="button" id="input_button" value="Send Input" onclick="GetQuestions()">
        </p>
        
        <h2 id="i"></h2>
        
        <p id="question"></p>
        
        <p id="question">
            <button onclick="ChangeQuestion(1)">Forward</button>
            <button onclick="ChangeQuestion(-1)">Backwards</button>
        </p>
        
        <script>
            document.getElementById("i").style.display = "none";
            document.getElementById("question").style.display = "none";
        </script>
        
        <script>
            var currentQuestion = 1;
            var items = [""];
            var response;
            var numberofquestions = document.getElementById("input_box").innerHTML;
            const getQuestionAPI = "https://qg7wae0zml.execute-api.eu-west-1.amazonaws.com/live?numberofquestions=";
            
            function ChangeQuestion(changeby) {
                currentQuestion = currentQuestion + changeby; 
                
                if (currentQuestion <= items.length && currentQuestion >= 1)
                {
                document.getElementById("question").innerHTML= items[currentQuestion-1].question;
                document.getElementById("i").innerHTML = "Question " + currentQuestion + "/" + items.length;
                //console.log(currentQuestion)
                }
                else
                {
                    currentQuestion = currentQuestion - changeby;
                    //console.log("hit limit")
                }
            }

            function GetQuestions() {
                InitialiseQuestionScreen();
                
                var request = new XMLHttpRequest();

                request.open('GET', (getQuestionAPI + numberofquestions), true);
                request.onload = function() {
                    var data = JSON.parse(this.response);

                    if (request.status >= 200 && request.status < 400) {
                        data.forEach(movie => {
                        console.log(movie.title);
                        });
                    } else {
                        console.log('error');
                    }
                };
                request.send();
                items = response.questions;
                //for(var i = 0; i < )
            
                document.getElementById("test").innerHTML = items[currentQuestion-1].question;
                document.getElementById("i").innerHTML = "Question " + currentQuestion + "/" + items.length;
            }
            
            function InitialiseQuestionScreen(){
                document.getElementById("i").style.display = "block";
                document.getElementById("question").style.display = "block";
                document.getElementById("input").style.display = "none";
            }
        </script>
    </body>
</html>